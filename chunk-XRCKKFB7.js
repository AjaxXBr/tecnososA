import{a as ae,b as j}from"./chunk-G6EORHDL.js";import{b as z}from"./chunk-G3PMQNUP.js";import{a as ee,b as te,i as ie,j as oe,s as ne}from"./chunk-NPJDO2MN.js";import"./chunk-FXWHQ5QQ.js";import{$ as K,A as g,B as b,C as u,D as S,E as s,Ea as X,F as M,Fa as Y,G as C,H as G,Ha as Z,I as h,Ia as $,J as _,K as E,Q as F,R as x,T,_ as J,aa as Q,ea as R,fa as W,ga as k,i as q,m as v,ma as P,n as y,na as N,oa as A,p as H,pa as O,qa as V,s as n,sa as U,t as I,ta as B,w,wa as D,x as m,xa as L,y as t,z as i}from"./chunk-3UZMSI2G.js";import"./chunk-4EWL26LU.js";import"./chunk-KDDLO6BQ.js";import"./chunk-4EOFL5AI.js";import"./chunk-REDFVHFG.js";import"./chunk-WTJTNUM2.js";import"./chunk-6TYOTTQG.js";import"./chunk-4WFVMWDK.js";import"./chunk-M2X7KQLB.js";import"./chunk-2YSZFPCQ.js";import"./chunk-57YRIO75.js";import"./chunk-LRFGNCHE.js";import"./chunk-C5RQ2IC2.js";import"./chunk-42C7ZIID.js";import{i as f}from"./chunk-VBFW7A5V.js";function se(r,l){if(r&1&&(t(0,"ion-select-option",14),s(1),i()),r&2){let p=l.$implicit;m("value",p.id),n(),C(" ",p.nome," ")}}function ce(r,l){r&1&&g(0,"ion-spinner",15)}var re=(()=>{let l=class l{constructor(){this.salvo=new H,this.cancelado=new H,this.equipamentoService=q(j),this.clienteService=q(ae),this.alertService=q(z),this.form={nome:"",marca:"",modelo:"",numeroSerie:"",clienteId:"",especificacoes:"",dataAquisicao:new Date().toISOString().substring(0,10)},this.clientes=[],this.carregando=!1,this.editando=!1}ngOnInit(){return f(this,null,function*(){this.carregarClientes(),this.equipamento&&(this.editando=!0,this.form={nome:this.equipamento.nome,marca:this.equipamento.marca,modelo:this.equipamento.modelo,numeroSerie:this.equipamento.numeroSerie,clienteId:this.equipamento.clienteId,especificacoes:this.equipamento.especificacoes,dataAquisicao:this.equipamento.dataAquisicao.toISOString().substring(0,10)})})}carregarClientes(){return f(this,null,function*(){try{this.clienteService.obterClientes().subscribe(a=>{this.clientes=a})}catch{yield this.alertService.showError("Erro ao carregar clientes")}})}salvar(){return f(this,null,function*(){if(console.log("\u{1F504} Tentando salvar equipamento...",this.form),this.validarFormulario()){this.carregando=!0,console.log("\u2705 Formul\xE1rio v\xE1lido, salvando...");try{this.editando&&this.equipamento?.id?(console.log("\u270F\uFE0F Editando equipamento existente:",this.equipamento.id),yield this.equipamentoService.atualizarEquipamento(this.equipamento.id,this.form),yield this.alertService.showSuccess("Equipamento atualizado com sucesso!")):(console.log("\u2795 Adicionando novo equipamento"),yield this.equipamentoService.adicionarEquipamento(this.form),yield this.alertService.showSuccess("Equipamento cadastrado com sucesso!")),console.log("\u2705 Equipamento salvo com sucesso"),this.salvo.emit(),this.limparFormulario()}catch(a){console.error("\u274C Erro ao salvar equipamento:",a),yield this.alertService.showError("Erro ao salvar equipamento: "+a.message)}finally{this.carregando=!1,console.log("\u{1F3C1} Processo de salvamento finalizado")}}else console.log("\u274C Formul\xE1rio inv\xE1lido")})}cancelar(){this.cancelado.emit(),this.limparFormulario()}validarFormulario(){return!this.form.nome||this.form.nome.trim().length<2?(this.alertService.showError("Nome deve ter pelo menos 2 caracteres"),!1):this.form.marca?this.form.modelo?this.form.numeroSerie?this.form.clienteId?!0:(this.alertService.showError("Cliente \xE9 obrigat\xF3rio"),!1):(this.alertService.showError("N\xFAmero de s\xE9rie \xE9 obrigat\xF3rio"),!1):(this.alertService.showError("Modelo \xE9 obrigat\xF3rio"),!1):(this.alertService.showError("Marca \xE9 obrigat\xF3ria"),!1)}limparFormulario(){this.form={nome:"",marca:"",modelo:"",numeroSerie:"",clienteId:"",especificacoes:"",dataAquisicao:new Date().toISOString().substring(0,10)},this.editando=!1}};l.\u0275fac=function(c){return new(c||l)},l.\u0275cmp=I({type:l,selectors:[["app-equipamento-form"]],inputs:{equipamento:"equipamento"},outputs:{salvo:"salvo",cancelado:"cancelado"},decls:42,vars:20,consts:[["slot","end"],[3,"click","disabled"],["position","stacked"],["type","text","placeholder","Ex: Notebook Dell Inspiron",3,"ngModelChange","ngModel","disabled"],["type","text","placeholder","Ex: Dell",3,"ngModelChange","ngModel","disabled"],["type","text","placeholder","Ex: Inspiron 15",3,"ngModelChange","ngModel","disabled"],["type","text","placeholder","Ex: SN123456789",3,"ngModelChange","ngModel","disabled"],["placeholder","Selecione o cliente",3,"ngModelChange","ngModel","disabled"],[3,"value",4,"ngFor","ngForOf"],["type","date",3,"ngModelChange","ngModel","disabled"],["placeholder","Descreva as especifica\xE7\xF5es do equipamento",3,"ngModelChange","ngModel","disabled"],[1,"ion-padding"],["expand","block","color","primary",3,"click","disabled"],["slot","start",4,"ngIf"],[3,"value"],["slot","start"]],template:function(c,e){c&1&&(t(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),s(3),i(),t(4,"ion-buttons",0)(5,"ion-button",1),u("click",function(){return e.cancelar()}),s(6,"Cancelar"),i()()()(),t(7,"ion-content")(8,"ion-list")(9,"ion-item")(10,"ion-label",2),s(11,"Nome *"),i(),t(12,"ion-input",3),E("ngModelChange",function(o){return _(e.form.nome,o)||(e.form.nome=o),o}),i()(),t(13,"ion-item")(14,"ion-label",2),s(15,"Marca *"),i(),t(16,"ion-input",4),E("ngModelChange",function(o){return _(e.form.marca,o)||(e.form.marca=o),o}),i()(),t(17,"ion-item")(18,"ion-label",2),s(19,"Modelo *"),i(),t(20,"ion-input",5),E("ngModelChange",function(o){return _(e.form.modelo,o)||(e.form.modelo=o),o}),i()(),t(21,"ion-item")(22,"ion-label",2),s(23,"N\xFAmero de S\xE9rie *"),i(),t(24,"ion-input",6),E("ngModelChange",function(o){return _(e.form.numeroSerie,o)||(e.form.numeroSerie=o),o}),i()(),t(25,"ion-item")(26,"ion-label",2),s(27,"Cliente *"),i(),t(28,"ion-select",7),E("ngModelChange",function(o){return _(e.form.clienteId,o)||(e.form.clienteId=o),o}),w(29,se,2,2,"ion-select-option",8),i()(),t(30,"ion-item")(31,"ion-label",2),s(32,"Data de Aquisi\xE7\xE3o"),i(),t(33,"ion-input",9),E("ngModelChange",function(o){return _(e.form.dataAquisicao,o)||(e.form.dataAquisicao=o),o}),i()(),t(34,"ion-item")(35,"ion-label",2),s(36,"Especifica\xE7\xF5es"),i(),t(37,"ion-textarea",10),E("ngModelChange",function(o){return _(e.form.especificacoes,o)||(e.form.especificacoes=o),o}),i()()(),t(38,"div",11)(39,"ion-button",12),u("click",function(){return e.salvar()}),w(40,ce,1,0,"ion-spinner",13),s(41),i()()()),c&2&&(n(3),M(e.editando?"Editar Equipamento":"Novo Equipamento"),n(2),m("disabled",e.carregando),n(7),h("ngModel",e.form.nome),m("disabled",e.carregando),n(4),h("ngModel",e.form.marca),m("disabled",e.carregando),n(4),h("ngModel",e.form.modelo),m("disabled",e.carregando),n(4),h("ngModel",e.form.numeroSerie),m("disabled",e.carregando),n(4),h("ngModel",e.form.clienteId),m("disabled",e.carregando),n(),m("ngForOf",e.clientes),n(4),h("ngModel",e.form.dataAquisicao),m("disabled",e.carregando),n(4),h("ngModel",e.form.especificacoes),m("disabled",e.carregando),n(2),m("disabled",e.carregando),n(),m("ngIf",e.carregando),n(),C(" ",e.editando?"Atualizar":"Cadastrar"," Equipamento "))},dependencies:[T,F,x,Q,J,K,P,N,L,D,k,W,V,A,O,Y,Z,U,B,$],encapsulation:2});let r=l;return r})();function pe(r,l){if(r&1){let p=b();t(0,"ion-item")(1,"ion-avatar",9),g(2,"ion-icon",10),i(),t(3,"ion-label")(4,"h2"),s(5),i(),t(6,"p"),s(7),i(),t(8,"p"),s(9),i(),t(10,"p"),s(11),i()(),t(12,"ion-buttons",2)(13,"ion-button",11),u("click",function(){let c=v(p).$implicit,e=S();return y(e.editarEquipamento(c))}),g(14,"ion-icon",12),i(),t(15,"ion-button",13),u("click",function(){let c=v(p).$implicit,e=S();return y(e.excluirEquipamento(c))}),g(16,"ion-icon",14),i()()()}if(r&2){let p=l.$implicit;n(5),M(p.nome),n(2),G("",p.marca," ",p.modelo,""),n(2),C("Cliente: ",p.clienteNome,""),n(2),C("N/S: ",p.numeroSerie,"")}}function de(r,l){r&1&&(t(0,"div",15),g(1,"ion-spinner"),t(2,"p"),s(3,"Carregando equipamentos..."),i()())}function ue(r,l){if(r&1){let p=b();t(0,"div",15)(1,"p"),s(2,"Nenhum equipamento cadastrado"),i(),t(3,"ion-button",3),u("click",function(){v(p);let c=S();return y(c.novoEquipamento())}),s(4,"Cadastrar Primeiro Equipamento"),i()()}}function fe(r,l){if(r&1){let p=b();t(0,"app-equipamento-form",16),u("salvo",function(){v(p);let c=S();return y(c.onEquipamentoSalvo())})("cancelado",function(){v(p);let c=S();return y(c.onEquipamentoCancelado())}),i()}if(r&2){let p=S();m("equipamento",p.equipamentoEditando)}}var Ve=(()=>{let l=class l{constructor(){this.equipamentoService=q(j),this.alertService=q(z),this.equipamentos=[],this.carregando=!1,this.mostrarFormulario=!1,ee({add:te,create:ie,trash:ne,eye:oe})}ngOnInit(){this.carregarEquipamentos()}carregarEquipamentos(){return f(this,null,function*(){this.carregando=!0;try{this.equipamentoService.obterEquipamentos().subscribe({next:a=>{this.equipamentos=a,this.carregando=!1},error:a=>f(this,null,function*(){yield this.alertService.showError("Erro ao carregar equipamentos"),this.carregando=!1})})}catch{yield this.alertService.showError("Erro ao carregar equipamentos"),this.carregando=!1}})}novoEquipamento(){this.equipamentoEditando=void 0,this.mostrarFormulario=!0}editarEquipamento(a){this.equipamentoEditando=a,this.mostrarFormulario=!0}excluirEquipamento(a){return f(this,null,function*(){if((yield this.alertService.showConfirm("Confirmar Exclus\xE3o",`Deseja realmente excluir o equipamento ${a.nome}?`))&&a.id)try{yield this.equipamentoService.excluirEquipamento(a.id),yield this.alertService.showSuccess("Equipamento exclu\xEDdo com sucesso!"),this.carregarEquipamentos()}catch(e){yield this.alertService.showError("Erro ao excluir equipamento: "+e.message)}})}onEquipamentoSalvo(){this.mostrarFormulario=!1,this.equipamentoEditando=void 0,this.carregarEquipamentos()}onEquipamentoCancelado(){this.mostrarFormulario=!1,this.equipamentoEditando=void 0}};l.\u0275fac=function(c){return new(c||l)},l.\u0275cmp=I({type:l,selectors:[["app-equipamentos"]],decls:13,vars:6,consts:[[3,"translucent"],["color","primary"],["slot","end"],[3,"click"],["slot","icon-only","name","add"],[3,"fullscreen"],[4,"ngFor","ngForOf"],["class","ion-text-center ion-padding",4,"ngIf"],[3,"equipamento","salvo","cancelado",4,"ngIf"],["slot","start"],["name","hardware-chip","color","medium"],["fill","clear","color","warning",3,"click"],["slot","icon-only","name","create"],["fill","clear","color","danger",3,"click"],["slot","icon-only","name","trash"],[1,"ion-text-center","ion-padding"],[3,"salvo","cancelado","equipamento"]],template:function(c,e){c&1&&(t(0,"ion-header",0)(1,"ion-toolbar",1)(2,"ion-title"),s(3,"Equipamentos"),i(),t(4,"ion-buttons",2)(5,"ion-button",3),u("click",function(){return e.novoEquipamento()}),g(6,"ion-icon",4),i()()()(),t(7,"ion-content",5)(8,"ion-list"),w(9,pe,17,5,"ion-item",6),i(),w(10,de,4,0,"div",7)(11,ue,5,0,"div",7)(12,fe,1,1,"app-equipamento-form",8),i()),c&2&&(m("translucent",!0),n(7),m("fullscreen",!0),n(2),m("ngForOf",e.equipamentos),n(),m("ngIf",e.carregando),n(),m("ngIf",e.equipamentos.length===0&&!e.carregando),n(),m("ngIf",e.mostrarFormulario))},dependencies:[T,F,x,N,L,D,k,W,P,V,A,O,X,R,re,B],encapsulation:2});let r=l;return r})();export{Ve as EquipamentosPage};
