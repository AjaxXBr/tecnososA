import{a as pe,b as F}from"./chunk-G3PMQNUP.js";import{a as ne,d as oe,e as re,i as ae,m as le,n as se,p as me,q as de,r as ce}from"./chunk-NPJDO2MN.js";import"./chunk-FXWHQ5QQ.js";import{$ as R,A as p,B as V,C as S,D,E as o,Ea as te,Fa as ie,G as H,I as u,J as h,K as g,R as b,T as y,_ as O,aa as q,c as N,d as U,e as j,ea as G,fa as v,ga as J,ha as K,i as f,ia as Q,ja as X,ka as Y,la as Z,m as x,ma as w,n as B,na as I,oa as M,p as L,pa as P,qa as T,s as m,t as C,ta as $,w as E,wa as W,x as d,xa as k,y as t,z as i,za as ee}from"./chunk-3UZMSI2G.js";import"./chunk-4EWL26LU.js";import"./chunk-KDDLO6BQ.js";import"./chunk-4EOFL5AI.js";import"./chunk-REDFVHFG.js";import"./chunk-WTJTNUM2.js";import"./chunk-6TYOTTQG.js";import"./chunk-4WFVMWDK.js";import"./chunk-M2X7KQLB.js";import"./chunk-2YSZFPCQ.js";import"./chunk-57YRIO75.js";import"./chunk-LRFGNCHE.js";import"./chunk-C5RQ2IC2.js";import"./chunk-42C7ZIID.js";import{a as A,i as _}from"./chunk-VBFW7A5V.js";var ue=(()=>{let r=class r{constructor(){this.colecao="usuarios",this.baseCrud=f(pe)}adicionarUsuario(a){return this.baseCrud.adicionar(this.colecao,a)}obterUsuarios(){return this.baseCrud.obterTodos(this.colecao)}obterUsuarioPorId(a){return _(this,null,function*(){return N(this.baseCrud.obterPorId(this.colecao,a))})}atualizarUsuario(a,l){return _(this,null,function*(){return this.baseCrud.atualizar(this.colecao,a,l)})}excluirUsuario(a){return this.baseCrud.excluir(this.colecao,a)}validarEmailUnico(a,l){return this.baseCrud.obterComFiltro(this.colecao,"email",a).pipe(U(e=>l?e.filter(c=>c.id!==l).length===0:e.length===0))}};r.\u0275fac=function(l){return new(l||r)},r.\u0275prov=j({token:r,factory:r.\u0275fac,providedIn:"root"});let s=r;return s})();function _e(s,r){s&1&&p(0,"ion-spinner",11)}var he=(()=>{let r=class r{constructor(){this.salvo=new L,this.cancelado=new L,this.usuarioService=f(ue),this.alertService=f(F),this.modalCtrl=f(ee),this.form={id:"usuario-atual-id",nome:"Diego Silva",email:"diego@tecnoos.com",telefone:"(31) 99999-9999",cargo:"T\xE9cnico de Inform\xE1tica",especialidade:"Hardware e Software",senha:"",confirmarSenha:""},this.carregando=!1}salvar(){return _(this,null,function*(){if(console.log("\u{1F504} Tentando salvar perfil...",this.form),this.validarFormulario()){this.carregando=!0;try{yield this.usuarioService.atualizarUsuario(this.form.id,A({nome:this.form.nome,email:this.form.email,telefone:this.form.telefone,cargo:this.form.cargo,especialidade:this.form.especialidade},this.form.senha&&{senha:this.form.senha})),yield this.alertService.showSuccess("Perfil atualizado com sucesso!"),this.salvo.emit(),this.modalCtrl.dismiss({atualizado:!0}),this.limparFormulario()}catch(a){console.error("\u274C Erro ao atualizar perfil:",a),yield this.alertService.showError("Erro ao atualizar perfil: "+a.message)}finally{this.carregando=!1}}})}cancelar(){this.cancelado.emit(),this.modalCtrl.dismiss(),this.limparFormulario()}validarFormulario(){return!this.form.nome||this.form.nome.trim().length<3?(this.alertService.showError("Nome deve ter pelo menos 3 caracteres"),!1):this.form.email?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(this.form.email)?this.form.senha&&this.form.senha.length<6?(this.alertService.showError("Senha deve ter pelo menos 6 caracteres"),!1):this.form.senha!==this.form.confirmarSenha?(this.alertService.showError("Senhas n\xE3o conferem"),!1):!0:(this.alertService.showError("Email inv\xE1lido"),!1):(this.alertService.showError("Email \xE9 obrigat\xF3rio"),!1)}limparFormulario(){this.form.senha="",this.form.confirmarSenha=""}};r.\u0275fac=function(l){return new(l||r)},r.\u0275cmp=C({type:r,selectors:[["app-editar-perfil"]],outputs:{salvo:"salvo",cancelado:"cancelado"},decls:41,vars:17,consts:[["slot","end"],[3,"click","disabled"],["position","stacked"],["type","text",3,"ngModelChange","ngModel","disabled"],["type","email",3,"ngModelChange","ngModel","disabled"],["type","tel",3,"ngModelChange","ngModel","disabled"],["type","password","placeholder","Deixe em branco para manter a atual",3,"ngModelChange","ngModel","disabled"],["type","password","placeholder","Confirme a nova senha",3,"ngModelChange","ngModel","disabled"],[1,"ion-padding"],["expand","block","color","primary",3,"click","disabled"],["slot","start",4,"ngIf"],["slot","start"]],template:function(l,e){l&1&&(t(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),o(3,"Editar Perfil"),i(),t(4,"ion-buttons",0)(5,"ion-button",1),S("click",function(){return e.cancelar()}),o(6,"Cancelar"),i()()()(),t(7,"ion-content")(8,"ion-list")(9,"ion-item")(10,"ion-label",2),o(11,"Nome *"),i(),t(12,"ion-input",3),g("ngModelChange",function(n){return h(e.form.nome,n)||(e.form.nome=n),n}),i()(),t(13,"ion-item")(14,"ion-label",2),o(15,"Email *"),i(),t(16,"ion-input",4),g("ngModelChange",function(n){return h(e.form.email,n)||(e.form.email=n),n}),i()(),t(17,"ion-item")(18,"ion-label",2),o(19,"Telefone"),i(),t(20,"ion-input",5),g("ngModelChange",function(n){return h(e.form.telefone,n)||(e.form.telefone=n),n}),i()(),t(21,"ion-item")(22,"ion-label",2),o(23,"Cargo"),i(),t(24,"ion-input",3),g("ngModelChange",function(n){return h(e.form.cargo,n)||(e.form.cargo=n),n}),i()(),t(25,"ion-item")(26,"ion-label",2),o(27,"Especialidade"),i(),t(28,"ion-input",3),g("ngModelChange",function(n){return h(e.form.especialidade,n)||(e.form.especialidade=n),n}),i()(),t(29,"ion-item")(30,"ion-label",2),o(31,"Nova Senha"),i(),t(32,"ion-input",6),g("ngModelChange",function(n){return h(e.form.senha,n)||(e.form.senha=n),n}),i()(),t(33,"ion-item")(34,"ion-label",2),o(35,"Confirmar Senha"),i(),t(36,"ion-input",7),g("ngModelChange",function(n){return h(e.form.confirmarSenha,n)||(e.form.confirmarSenha=n),n}),i()()(),t(37,"div",8)(38,"ion-button",9),S("click",function(){return e.salvar()}),E(39,_e,1,0,"ion-spinner",10),o(40," Salvar Altera\xE7\xF5es "),i()()()),l&2&&(m(5),d("disabled",e.carregando),m(7),u("ngModel",e.form.nome),d("disabled",e.carregando),m(4),u("ngModel",e.form.email),d("disabled",e.carregando),m(4),u("ngModel",e.form.telefone),d("disabled",e.carregando),m(4),u("ngModel",e.form.cargo),d("disabled",e.carregando),m(4),u("ngModel",e.form.especialidade),d("disabled",e.carregando),m(4),u("ngModel",e.form.senha),d("disabled",e.carregando),m(4),u("ngModel",e.form.confirmarSenha),d("disabled",e.carregando),m(2),d("disabled",e.carregando),m(),d("ngIf",e.carregando))},dependencies:[y,b,q,O,R,w,I,k,W,J,v,T,M,P,ie,$],encapsulation:2});let s=r;return s})();function Se(s,r){if(s&1){let z=V();t(0,"app-editar-perfil",18),S("salvo",function(){x(z);let l=D();return B(l.onPerfilSalvo())})("cancelado",function(){x(z);let l=D();return B(l.onPerfilCancelado())}),i()}}var Re=(()=>{let r=class r{constructor(){this.alertService=f(F),this.mostrarEditarPerfil=!1,this.estatisticas={osMes:12,clientesAtendidos:8,equipamentos:15},ne({person:me,mail:se,call:re,business:oe,statsChart:ce,create:ae,settings:de,logOut:le})}toggleEditarPerfil(){this.mostrarEditarPerfil=!this.mostrarEditarPerfil}sair(){return _(this,null,function*(){(yield this.alertService.showConfirm("Confirmar Sa\xEDda","Deseja realmente sair do aplicativo?"))&&(yield this.alertService.showSuccess("At\xE9 logo!"))})}onPerfilSalvo(){this.mostrarEditarPerfil=!1}onPerfilCancelado(){this.mostrarEditarPerfil=!1}};r.\u0275fac=function(l){return new(l||r)},r.\u0275cmp=C({type:r,selectors:[["app-conta"]],decls:53,vars:4,consts:[[3,"translucent"],["color","primary"],[3,"fullscreen"],[1,"profile-header"],[1,"profile-avatar"],["name","person","color","light"],["lines","none"],["name","mail","slot","start","color","primary"],["name","call","slot","start","color","primary"],["name","business","slot","start","color","primary"],["name","stats-chart","slot","start","color","primary"],["expand","block","color","secondary",3,"click"],["slot","start","name","create"],["expand","block","fill","outline","color","medium",2,"margin-top","8px"],["slot","start","name","settings"],["expand","block","fill","clear","color","danger",2,"margin-top","16px",3,"click"],["slot","start","name","log-out"],[3,"salvo","cancelado",4,"ngIf"],[3,"salvo","cancelado"]],template:function(l,e){l&1&&(t(0,"ion-header",0)(1,"ion-toolbar",1)(2,"ion-title"),o(3,"Minha Conta"),i()()(),t(4,"ion-content",2)(5,"ion-card")(6,"ion-card-header",3)(7,"ion-avatar",4),p(8,"ion-icon",5),i(),t(9,"ion-card-title"),o(10,"Diego Silva"),i(),t(11,"ion-card-subtitle"),o(12,"T\xE9cnico de Inform\xE1tica"),i()(),t(13,"ion-card-content")(14,"ion-list",6)(15,"ion-item"),p(16,"ion-icon",7),t(17,"ion-label")(18,"h3"),o(19,"Email"),i(),t(20,"p"),o(21,"diego@tecnoos.com"),i()()(),t(22,"ion-item"),p(23,"ion-icon",8),t(24,"ion-label")(25,"h3"),o(26,"Telefone"),i(),t(27,"p"),o(28,"(31) 99999-9999"),i()()(),t(29,"ion-item"),p(30,"ion-icon",9),t(31,"ion-label")(32,"h3"),o(33,"Especialidade"),i(),t(34,"p"),o(35,"Hardware e Software"),i()()(),t(36,"ion-item"),p(37,"ion-icon",10),t(38,"ion-label")(39,"h3"),o(40,"OS este m\xEAs"),i(),t(41,"p"),o(42),i()()()(),t(43,"ion-button",11),S("click",function(){return e.toggleEditarPerfil()}),p(44,"ion-icon",12),o(45," Editar Perfil "),i(),t(46,"ion-button",13),p(47,"ion-icon",14),o(48," Configura\xE7\xF5es "),i(),t(49,"ion-button",15),S("click",function(){return e.sair()}),p(50,"ion-icon",16),o(51," Sair "),i()()(),E(52,Se,1,0,"app-editar-perfil",17),i()),l&2&&(d("translucent",!0),m(4),d("fullscreen",!0),m(38),H("",e.estatisticas.osMes," ordens de servi\xE7o"),m(10),d("ngIf",e.mostrarEditarPerfil))},dependencies:[y,b,I,k,W,w,K,X,Z,Y,Q,v,te,T,M,P,G,he],encapsulation:2});let s=r;return s})();export{Re as ContaPage};
